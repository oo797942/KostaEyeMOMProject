<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="msg" >
<insert id="messageSending" parameterType="messageVO">
INSERT INTO mom_message(s_no, s_title, s_content, s_nick, s_id, s_send_nick, s_send_id, s_date, s_state)
VALUES (MOM_MESSAGE_NO.nextval, #{s_title}, #{s_content}, #{s_nick}, #{s_id}, #{s_send_nick}, #{s_send_id}, sysdate, 'n')
</insert>

<select id="sendMessageList" parameterType="messageVO" resultType="messageVO">
SELECT * FROM mom_message WHERE s_send_id = #{s_send_id}
</select>
<select id="receiveMessageList" parameterType="messageVO" resultType="messageVO">
SELECT * FROM mom_message WHERE s_id = #{s_id}
</select>
<select id="messageView" parameterType="messageVO" resultType="messageVO">
SELECT * FROM mom_message WHERE s_no = #{s_no}
</select>

<update id="messageCount" parameterType="messageVO" >
UPDATE mom_message SET s_state = 'y' WHERE s_no = #{s_no} and s_id != #{s_id}
</update>
<delete id="deleteAll" parameterType="messageVO">
DELETE FROM mom_message WHERE s_no = #{s_no}
</delete>
<update id="readAll" parameterType="messageVO">
UPDATE mom_message SET s_state = 'y' WHERE s_no = #{s_no}</update>

</mapper>